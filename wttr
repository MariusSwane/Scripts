#!/bin/bash

curl -s 'wttr.in?2FnqT' > .cache/wttr

loc=$(head -n 1 .cache/wttr)
grep -B1 Â° .cache/wttr | sed '/^ *$/d' > .cache/evenwttr
tempnow=$(grep -m1 -e "[0-9]" .cache/evenwttr | sed 's/[^[:alnum:]]\+/ /g' | awk '{print $1 "Â°C"}')
tempnoon=$(awk -F 'â”‚' '{print $2}' .cache/evenwttr | tail -n1 | sed 's/[^[:alnum:]]\+/ /g' | awk '{print $1 "Â°C"}')
wnoon=$(awk -F 'â”‚' '{print $2}' .cache/evenwttr | grep -e "[a-z]" | tail -n1 | sed 's/[^[:alnum:]]\+/ /g' | awk '{print $1}')
wnow=$(head -n1 .cache/evenwttr | sed 's/[^[:alnum:]]\+/ /g ; s/^ //')

#partly=$(â›…)
#sunny=$(â˜€ï¸)
#cloud=$(â˜ï¸ğŸŒ§ï¸ğŸŒ§ï¸ snow:ğŸŒ¨ï¸)


#if [ "$wnow" == "Partly cloudy" ]; then
#	wnow=â›…
#fi
#
#if [ "$wnow" == "Sunny" ]; then
#	wnow=â˜€ï¸
#fi
#
#if [ "$wnow" == "Cloudy" ] || [ "$wnow" == "Fog" ] || [ "$wnow" == "Overcast" ]; then
#	wnow=â˜ï¸
#fi
#
#if [ "$wnow" == "Rain" ] || [ "$wnow" == "Light drizzle" ] || [ "$wnow" == "Moderate rain" ] || [ "$wnow" == "Light rain" ]; then
#	wnow=ğŸŒ§ï¸ 
#fi
#
#if [ "$wnoon" == "Partly cloudy" ]; then
#	wnoon=â›…
#fi
#
#if [ "$wnoon" == "Sunny" ]; then
#	wnoon=â˜€ï¸
#fi
#
#if [ "$wnoon" == "Cloudy" ] || [ "$wnoon" == "Fog" ] || [ "$wnoon" == "Overcast" ]; then
#	wnoon=â˜ï¸
#fi
#
#if [ "$wnoon" == "Rain" ] || [ "$wnoon" == "Light drizzle" ] || [ "$wnoon" == "Moderate rain" ] || [ "$wnoon" == "Light rain" ]; then
#	wnoon=ğŸŒ§ï¸ 
#fi

echo "$loc | $wnow $tempnow | $wnoon $tempnoon"
